<div class="space-y-4">
  <h4 class="text-sm font-semibold text-gray-900">Text Properties</h4>
  
  <%= form_with model: [@pdf_document, element], local: false, html: { class: "space-y-3" } do |form| %>
    <!-- Text Content -->
    <div>
      <label class="block text-xs font-medium text-gray-700 mb-1">Text Content</label>
      <%= form.text_area :content_text, 
          value: element.content['text'] || 'New text',
          class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
          rows: 3,
          data: { 
            action: "input->pdf-editor#updateElementProperty",
            property: "content.text"
          } %>
    </div>

    <!-- Font Settings -->
    <div class="grid grid-cols-2 gap-2">
      <div>
        <label class="block text-xs font-medium text-gray-700 mb-1">Font Family</label>
        <%= form.select :font_family,
            options_for_select([
              ['Arial', 'Arial'],
              ['Times New Roman', 'Times New Roman'],
              ['Courier New', 'Courier New'],
              ['Helvetica', 'Helvetica'],
              ['Georgia', 'Georgia']
            ], element.styles['font_family'] || 'Arial'),
            {},
            { 
              class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
              data: { 
                action: "change->pdf-editor#updateElementProperty",
                property: "styles.font_family"
              }
            } %>
      </div>
      
      <div>
        <label class="block text-xs font-medium text-gray-700 mb-1">Font Size</label>
        <%= form.number_field :font_size,
            value: element.styles['font_size'] || 12,
            min: 8, max: 72,
            class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
            data: { 
              action: "input->pdf-editor#updateElementProperty",
              property: "styles.font_size"
            } %>
      </div>
    </div>

    <!-- Text Style -->
    <div class="grid grid-cols-3 gap-2">
      <div>
        <label class="block text-xs font-medium text-gray-700 mb-1">Weight</label>
        <%= form.select :font_weight,
            options_for_select([
              ['Normal', 'normal'],
              ['Bold', 'bold']
            ], element.styles['font_weight'] || 'normal'),
            {},
            { 
              class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
              data: { 
                action: "change->pdf-editor#updateElementProperty",
                property: "styles.font_weight"
              }
            } %>
      </div>
      
      <div>
        <label class="block text-xs font-medium text-gray-700 mb-1">Style</label>
        <%= form.select :font_style,
            options_for_select([
              ['Normal', 'normal'],
              ['Italic', 'italic']
            ], element.styles['font_style'] || 'normal'),
            {},
            { 
              class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
              data: { 
                action: "change->pdf-editor#updateElementProperty",
                property: "styles.font_style"
              }
            } %>
      </div>
      
      <div>
        <label class="block text-xs font-medium text-gray-700 mb-1">Align</label>
        <%= form.select :text_align,
            options_for_select([
              ['Left', 'left'],
              ['Center', 'center'],
              ['Right', 'right']
            ], element.styles['text_align'] || 'left'),
            {},
            { 
              class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
              data: { 
                action: "change->pdf-editor#updateElementProperty",
                property: "styles.text_align"
              }
            } %>
      </div>
    </div>

    <!-- Color -->
    <div>
      <label class="block text-xs font-medium text-gray-700 mb-1">Text Color</label>
      <%= form.color_field :color,
          value: element.styles['color'] || '#000000',
          class: "w-full h-8 border border-gray-300 rounded-md cursor-pointer",
          data: { 
            action: "input->pdf-editor#updateElementProperty",
            property: "styles.color"
          } %>
    </div>

    <!-- Position and Size -->
    <div class="pt-2 border-t border-gray-200">
      <h5 class="text-xs font-medium text-gray-700 mb-2">Position & Size</h5>
      <div class="grid grid-cols-2 gap-2">
        <div>
          <label class="block text-xs font-medium text-gray-600 mb-1">X Position</label>
          <%= form.number_field :x_position,
              value: element.x_position || 0,
              step: 0.1,
              class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
              data: { 
                action: "input->pdf-editor#updateElementProperty",
                property: "x_position"
              } %>
        </div>
        
        <div>
          <label class="block text-xs font-medium text-gray-600 mb-1">Y Position</label>
          <%= form.number_field :y_position,
              value: element.y_position || 0,
              step: 0.1,
              class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
              data: { 
                action: "input->pdf-editor#updateElementProperty",
                property: "y_position"
              } %>
        </div>
        
        <div>
          <label class="block text-xs font-medium text-gray-600 mb-1">Width</label>
          <%= form.number_field :width,
              value: element.width || 200,
              min: 10,
              class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
              data: { 
                action: "input->pdf-editor#updateElementProperty",
                property: "width"
              } %>
        </div>
        
        <div>
          <label class="block text-xs font-medium text-gray-600 mb-1">Height</label>
          <%= form.number_field :height,
              value: element.height || 30,
              min: 10,
              class: "w-full px-2 py-1 border border-gray-300 rounded-md text-xs",
              data: { 
                action: "input->pdf-editor#updateElementProperty",
                property: "height"
              } %>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="pt-2 border-t border-gray-200 flex space-x-2">
      <button type="button" 
              class="flex-1 px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"
              data-action="click->pdf-editor#deleteSelectedElement">
        Delete
      </button>
      
      <button type="button" 
              class="flex-1 px-3 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700"
              data-action="click->pdf-editor#duplicateElement">
        Duplicate
      </button>
    </div>
  <% end %>
</div>
